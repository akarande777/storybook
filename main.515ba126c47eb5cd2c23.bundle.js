(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{343:function(module,exports,__webpack_require__){__webpack_require__(344),__webpack_require__(490),__webpack_require__(491),module.exports=__webpack_require__(654)},408:function(module,exports){},654:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var _storybook_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(299);module._StorybookPreserveDecorators=!0,Object(_storybook_react__WEBPACK_IMPORTED_MODULE_0__.configure)([__webpack_require__(686)],module)}.call(this,__webpack_require__(655)(module))},686:function(module,exports,__webpack_require__){var map={"./index.stories.js":687};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=686},687:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"barChart",(function(){return index_stories_barChart})),__webpack_require__.d(__webpack_exports__,"lineChart",(function(){return index_stories_lineChart})),__webpack_require__.d(__webpack_exports__,"pieChart",(function(){return index_stories_pieChart}));var react=__webpack_require__(9),react_default=__webpack_require__.n(react),classCallCheck=__webpack_require__(16),createClass=__webpack_require__(73),createSuper=__webpack_require__(19),inherits=__webpack_require__(20),d3=__webpack_require__(10),toConsumableArray=__webpack_require__(74),assertThisInitialized=__webpack_require__(58),consts_barWidth=35,consts_pointOpacity=.4,Chart_Chart=function Chart(divHeight,_data,xlabels,colors){var _this=this;Object(classCallCheck.a)(this,Chart),this.setData=function(data){_this.data=data},this.selectAll=function(className){return d3.f(_this.parent).selectAll(className)},this.select=function(el){return d3.f(el)},this.getScale=function(min,max){var data=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];data=data.length?data:_this.data;var dmin=0,dmax=d3.b(data.map((function(d){return Array.isArray(d)?d.reduce((function(a,b){return a+b}),0):d})));return dmax>0?d3.d().domain([dmin,dmax]).range([min,max]):d3.d().domain([0,0]).range([0,0])},this.plotLabels=function(text,fx,fy){return _this.chart.data(_this.data).enter().append("text").text(text).attr("x",fx).attr("y",fy).attr("text-anchor","middle")},this.plotBars=function(color,width,height,fx,fy){return _this.chart.data(_this.data).enter().append("rect").style("fill",color).attr("width",width).attr("height",height).attr("x",fx).attr("y",fy)},this.plotLines=function(color,stroke,fx1,fy1,fx2,fy2){var slice=_this.data.slice(0,_this.data.length-1);return _this.chart.data(slice).enter().append("line").attr("class","path"+color.substring(1)).style("stroke",color).style("stroke-width",stroke).attr("x1",fx1).attr("y1",fy1).attr("x2",(function(d,k){return fx2(_this.data[k+1],k)})).attr("y2",(function(d,k){return fy2(_this.data[k+1],k)}))},this.plotPoints=function(color,fx,fy){return _this.chart.data(_this.data).enter().append("circle").attr("class","point"+color.substring(1)).style("stroke",color).style("fill",color).style("fill-opacity",consts_pointOpacity).attr("cx",fx).attr("cy",fy).attr("r",4)},this.plotCurves=function(color,stroke,fx1,fy1,fx2,fy2){var cx=_this.gapSize/3,slice=_this.data.slice(0,_this.data.length-1);return _this.chart.data(slice).enter().append("path").attr("class","path"+color.substring(1)).style("stroke",color).style("stroke-width",stroke).style("fill","none").attr("d",(function(d,k){var x1=fx1(d,k),y1=fy1(d,k),x2=fx2(_this.data[k+1],k),y2=fy2(_this.data[k+1],k);return"M ".concat(x1+" "+y1," \n                    C ").concat(x1+cx+" "+y1,"\n                    ").concat(x2-cx+" "+y2,"\n                    ").concat(x2+" "+y2)}))},this.showTooltip=function(el,value){var x,y,offsetX,offsetY;console.log("tooltip",d3.f(el)),_this.tooltip.transition().duration(200).style("opacity",.8),"rect"===el.tagName?(x=d3.f(el).attr("x"),y=d3.f(el).attr("y"),offsetX=consts_barWidth+5,offsetY=10):(x=d3.f(el).attr("cx"),y=d3.f(el).attr("cy"),offsetX=offsetY=10),_this.tooltip.html(value).attr("x",parseFloat(x)+offsetX).attr("y",parseFloat(y)+offsetY).attr("font-size",12)},this.hideTooltip=function(){_this.tooltip.transition().duration(500).style("opacity",0)},this.drawArc=function(arcs,radius){var color=d3.e(_this.colors),arc=d3.a().innerRadius(0).outerRadius(radius);return arcs.append("path").attr("fill",(function(d,i){return color(i)})).attr("stroke-width",1).attr("stroke","white").attr("d",arc)},this.getArcs=function(g){var pie=d3.c();return g.selectAll("arc").data(pie(_this.data)).enter().append("g").attr("class","arc")};this.chartHeight=divHeight-40,this.data=_data,this.xlabels=xlabels,this.colors=colors,this.yscale=this.getScale(0,this.chartHeight-40)},BarChart_BarChart=function(_Chart){Object(inherits.a)(BarChart,_Chart);var _super=Object(createSuper.a)(BarChart);function BarChart(chartDiv,divHeight,data,xlabels,colors,type){var _this;return Object(classCallCheck.a)(this,BarChart),(_this=_super.call(this,divHeight,data,xlabels,colors)).barMouseOver=function(el,value){_this.showTooltip(el,value)},_this.barMouseOut=function(){_this.hideTooltip()},_this.plotChart=function(){var chartHeight=_this.chartHeight,yscale=_this.yscale;"stacked"===_this.type?_this.stackChart():"grouped"===_this.type?(_this.gapSize/=2,_this.groupChart()):_this.plotBars(_this.colors[0],_this.barWidth,(function(d){return yscale(d.reduce((function(a,b){return a+b}),0)/1.2)}),(function(d,k){return _this.barx(k)}),(function(d){return chartHeight-yscale(d.reduce((function(a,b){return a+b}),0)/1.2)})),"grouped"!==_this.type&&(_this.plotLabels((function(d){return d.reduce((function(a,b){return a+b}),0)}),(function(d,k){return _this.barx(k)+_this.barWidth/2}),(function(d){return chartHeight-yscale(d.reduce((function(a,b){return a+b}),0)/1.2)-5})),_this.plotLabels((function(d,k){return _this.xlabels[k]}),(function(d,k){return _this.barx(k)+_this.barWidth/2}),(function(){return chartHeight+20})).attr("font-size",12)),_this.select(_this.parent).append("line").style("stroke","#001629").style("stroke-width",.5).attr("x1",0).attr("y1",chartHeight).attr("x2",_this.chartWidth).attr("y2",chartHeight)},_this.getChartWidth=function(){return"grouped"===_this.type?(_this.data.length+1)*(_this.groupSize*_this.barWidth+_this.gapSize):(_this.data.length+2)*(_this.barWidth+_this.gapSize)},_this.barx=function(i){return"grouped"===_this.type?i%_this.groupSize==0?(i+1)*(_this.barWidth+_this.gapSize):(i+1)*(_this.barWidth+_this.gapSize)-i%_this.groupSize*_this.gapSize:(i+1)*(_this.barWidth+_this.gapSize)},_this.stackChart=function(){for(var yscale=_this.yscale,self=Object(assertThisInitialized.a)(_this),_loop=function _loop(i){_this.plotBars(_this.colors[i],_this.barWidth,(function(d){return _this.yscale(d[i])/1.2}),(function(d,k){return _this.barx(k)}),(function(d){var offset=0;if(i>0)for(var k=i-1;k>=0;k--)offset+=d[k];return _this.chartHeight-yscale(d[i])/1.2-yscale(offset)/1.2})).on("mouseover",(function(d){self.barMouseOver(this,d[i])})).on("mouseout",(function(d){self.barMouseOut()}))},i=0;i<_this.data[0].length;i++)_loop(i)},_this.groupChart=function(){var _ref,chartHeight=_this.chartHeight;_this.setData((_ref=[]).concat.apply(_ref,Object(toConsumableArray.a)(_this.data)));var yscale=_this.getScale(0,_this.chartHeight/1.5-40);_this.plotBars((function(d,k){return _this.colors[k%_this.groupSize]}),_this.barWidth,(function(d,k){return yscale(d)}),(function(d,k){return _this.barx(k)}),(function(d,k){return chartHeight-yscale(d)})),_this.plotLabels((function(d){return d}),(function(d,k){return _this.barx(k)+_this.barWidth/2}),(function(d){return chartHeight-yscale(d)-5})).attr("font-size",12),_this.plotLabels((function(d,k){return k%_this.groupSize==0?_this.xlabels[Math.floor(k/_this.groupSize)]:null}),(function(d,k){return _this.barx(k)+_this.groupSize*_this.barWidth/2}),(function(){return chartHeight+20})).attr("font-size",12)},_this.barWidth="grouped"===type?25:35,_this.gapSize=_this.barWidth/1.5,_this.groupSize=_this.data[0].length,_this.type=type,_this.chartWidth=_this.getChartWidth(),_this.chart=chartDiv.select("svg").attr("width",_this.chartWidth).attr("height",divHeight).style("background","white").selectAll("rect"),_this.tooltip=chartDiv.select("svg").append("text").attr("class","tooltip").style("opacity",0),_this.parent=_this.chart._parents[0],_this.plotChart(),_this}return BarChart}(Chart_Chart),BarChart_Chart=function(_React$Component){Object(inherits.a)(Chart,_React$Component);var _super=Object(createSuper.a)(Chart);function Chart(){var _this;Object(classCallCheck.a)(this,Chart);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_this=_super.call.apply(_super,[this].concat(args))).data=[],_this.xlabels=[],_this}return Object(createClass.a)(Chart,[{key:"componentDidMount",value:function componentDidMount(){this.data=Array.from({length:8},(function(){return Array.from({length:3},(function(){return Math.floor(40*Math.random())+5}))})),this.xlabels=this.data.map((function(d,i){return String.fromCharCode(65+i)})),this.plotChart(this.props.options)}},{key:"componentWillReceiveProps",value:function componentWillReceiveProps(nextProps){this.plotChart(nextProps.options)}},{key:"plotChart",value:function plotChart(options){var chartDiv=document.querySelectorAll(".chartDiv")[0];chartDiv=d3.f(chartDiv),document.querySelectorAll(".chart")[0].innerHTML="",new BarChart_BarChart(chartDiv,350,this.data,this.xlabels,options.colors,options.type)}},{key:"render",value:function render(){return react_default.a.createElement("div",{className:"chartDiv"},react_default.a.createElement("svg",{className:"chart"}))}}]),Chart}(react_default.a.Component),LineChart_consts_lineStrokeHover=2.5,LineChart_consts_pointOpacity=.4,LineChart_consts_pointOpacityLineHover=.9,LineChart_consts_pointRadius=4,LineChart_consts_pointRadiusHover=6,LineChart_LineChart=function(_Chart){Object(inherits.a)(LineChart,_Chart);var _super=Object(createSuper.a)(LineChart);function LineChart(chartDiv,divHeight,data,xlabels,colors,type,style){var _this;return Object(classCallCheck.a)(this,LineChart),(_this=_super.call(this,divHeight,data,xlabels,colors)).lineMouseOver=function(color){_this.selectAll(".path"+color.substring(1)).style("stroke-width",LineChart_consts_lineStrokeHover),_this.selectAll(".point"+color.substring(1)).style("fill-opacity",LineChart_consts_pointOpacityLineHover)},_this.lineMouseOut=function(color){_this.selectAll(".path"+color.substring(1)).style("stroke-width",_this.strokeWidth),_this.selectAll(".point"+color.substring(1)).style("fill-opacity",LineChart_consts_pointOpacity)},_this.pointMouseOver=function(el,value){_this.select(el).style("r",LineChart_consts_pointRadiusHover),_this.showTooltip(el,value)},_this.pointMouseOut=function(el){_this.select(el).style("r",LineChart_consts_pointRadius),_this.hideTooltip()},_this.plotChart=function(){var chartHeight=_this.chartHeight,lineChart="curved"===_this.style?_this.plotCurves:_this.plotLines,self=Object(assertThisInitialized.a)(_this);if("multiline"===_this.type)!function(){for(var _ref,flat=(_ref=[]).concat.apply(_ref,Object(toConsumableArray.a)(_this.data)),yscale=_this.getScale(0,_this.chartHeight-40,flat),size=_this.data[0].length,_loop=function _loop(i){lineChart(_this.colors[i],_this.strokeWidth,(function(d,k){return(k+1)*_this.gapSize}),(function(d,k){return chartHeight-yscale(_this.data[k][i]/1.5)}),(function(d,k){return(k+2)*_this.gapSize}),(function(d,k){return chartHeight-yscale(d[i]/1.5)})).on("mouseover",(function(){return _this.lineMouseOver(_this.colors[i])})).on("mouseout",(function(){return _this.lineMouseOut(_this.colors[i])})),_this.plotPoints(_this.colors[i],(function(d,k){return(k+1)*_this.gapSize}),(function(d,k){return chartHeight-yscale(d[i]/1.5)})).on("mouseover",(function(d){self.pointMouseOver(this,d[i])})).on("mouseout",(function(d){self.pointMouseOut(this)}))},i=0;i<size;i++)_loop(i)}();else{var yscale=_this.yscale;lineChart(_this.colors[0],_this.strokeWidth,(function(d,k){return(k+1)*_this.gapSize}),(function(d,k){return chartHeight-yscale(d.reduce((function(a,b){return a+b}),0)/1.2)}),(function(d,k){return(k+2)*_this.gapSize}),(function(d,k){return chartHeight-yscale(d.reduce((function(a,b){return a+b}),0)/1.2)})),_this.plotPoints(_this.colors[0],(function(d,k){return(k+1)*_this.gapSize}),(function(d,k){return chartHeight-yscale(d.reduce((function(a,b){return a+b}),0)/1.2)})),_this.plotLabels((function(d,k){return d.reduce((function(a,b){return a+b}),0)}),(function(d,k){return(k+1)*_this.gapSize+15}),(function(d){return chartHeight-yscale(d.reduce((function(a,b){return a+b}),0)/1.2)})).attr("font-size",12)}_this.plotLabels((function(d,k){return _this.xlabels[k]}),(function(d,k){return(k+1)*_this.gapSize}),(function(d){return chartHeight+20})).attr("font-size",12),_this.plotLines("#aaa",.5,(function(d,k){return(k+1)*_this.gapSize}),(function(d){return chartHeight}),(function(d,k){return(k+1)*_this.gapSize}),(function(d){return 5}))},_this.getChartWidth=function(){return _this.gapSize=60,(_this.data.length+2)*_this.gapSize},_this.strokeWidth=1.5,_this.type=type,_this.style=style,_this.chart=chartDiv.select("svg").attr("width",_this.getChartWidth()).attr("height",divHeight).style("background","white").selectAll("line"),_this.plotChart(),_this.tooltip=chartDiv.select("svg").append("text").attr("class","tooltip").style("opacity",0),_this.parent=_this.chart._parents[0],_this}return LineChart}(Chart_Chart),LineChart_Chart=function(_React$PureComponent){Object(inherits.a)(Chart,_React$PureComponent);var _super=Object(createSuper.a)(Chart);function Chart(){var _this;Object(classCallCheck.a)(this,Chart);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_this=_super.call.apply(_super,[this].concat(args))).data=[],_this.xlabels=[],_this}return Object(createClass.a)(Chart,[{key:"componentDidMount",value:function componentDidMount(){this.data=Array.from({length:8},(function(){return Array.from({length:3},(function(){return Math.floor(40*Math.random())+5}))})),this.xlabels=this.data.map((function(d,i){return String.fromCharCode(65+i)})),this.plotChart(this.props.options)}},{key:"componentWillReceiveProps",value:function componentWillReceiveProps(nextProps){this.plotChart(nextProps.options)}},{key:"plotChart",value:function plotChart(options){var chartDiv=document.querySelectorAll(".chartDiv")[0];chartDiv=d3.f(chartDiv),document.querySelectorAll(".chart")[0].innerHTML="",new LineChart_LineChart(chartDiv,350,this.data,this.xlabels,options.colors,options.multiline?"multiline":"",options.style)}},{key:"render",value:function render(){return react_default.a.createElement("div",{className:"chartDiv"},react_default.a.createElement("svg",{className:"chart"}))}}]),Chart}(react_default.a.PureComponent),PieChart_PieChart=function(_Chart){Object(inherits.a)(PieChart,_Chart);var _super=Object(createSuper.a)(PieChart);function PieChart(chartDiv,divHeight,data,xlabels,colors){var _this;Object(classCallCheck.a)(this,PieChart),(_this=_super.call(this,divHeight,data,xlabels,colors)).arcMouseOver=function(el){_this.select(el).attr("stroke-width",4)},_this.arcMouseOut=function(el){_this.select(el).attr("stroke-width",1)},_this.plotChart=function(g,radius){var arcs=_this.getArcs(g);_this.drawArc(arcs,radius);var self=Object(assertThisInitialized.a)(_this);_this.drawArc(arcs,radius+5).attr("fill-opacity",0).on("mouseover",(function(d,i){self.arcMouseOver(this),self.select(this).attr("fill-opacity",1)})).on("mouseout",(function(d,i){self.arcMouseOut(this),self.select(this).attr("fill-opacity",0)}))};_this.chart=chartDiv.select("svg").attr("width",300).attr("height",divHeight);var _radius=Math.min(300,divHeight)/3,_g=_this.chart.append("g").attr("transform","translate(150,"+divHeight/2+")");return _this.plotChart(_g,_radius),_this}return PieChart}(Chart_Chart),PieChart_Chart=function(_React$PureComponent){Object(inherits.a)(Chart,_React$PureComponent);var _super=Object(createSuper.a)(Chart);function Chart(){var _this;Object(classCallCheck.a)(this,Chart);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_this=_super.call.apply(_super,[this].concat(args))).data=[],_this.xlabels=[],_this}return Object(createClass.a)(Chart,[{key:"componentDidMount",value:function componentDidMount(){this.data=Array.from({length:5},(function(){return Math.floor(40*Math.random())+5})),this.plotChart(this.props.options)}},{key:"componentWillReceiveProps",value:function componentWillReceiveProps(nextProps){this.plotChart(nextProps.options)}},{key:"plotChart",value:function plotChart(options){var chartDiv=document.querySelectorAll(".chartDiv")[0];chartDiv=d3.f(chartDiv),document.querySelectorAll(".chart")[0].innerHTML="",new PieChart_PieChart(chartDiv,300,this.data,this.xlabels,options.colors)}},{key:"render",value:function render(){return react_default.a.createElement("div",{className:"chartDiv"},react_default.a.createElement("svg",{className:"chart"}))}}]),Chart}(react_default.a.PureComponent),dist=__webpack_require__(46);function interpolateColor(color1,color2,factor){arguments.length<3&&(factor=.5);for(var result=color1.slice(),i=0;i<3;i++)result[i]=Math.round(result[i]+factor*(color2[i]-color1[i]));return result}function rgbToHex(r,g,b){return"#"+((1<<24)+(r<<16)+(g<<8)+b).toString(16).slice(1)}function hexToRgb(hex){var result=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);return result?"rgb("+parseInt(result[1],16)+","+parseInt(result[2],16)+","+parseInt(result[3],16)+")":null}function interpolateColors(color1,color2,steps){var stepFactor=1/(steps-1),colorArray=[];color1=hexToRgb(color1).match(/\d+/g).map(Number),color2=hexToRgb(color2).match(/\d+/g).map(Number);for(var i=0;i<steps;i++)colorArray.push(interpolateColor(color1,color2,stepFactor*i));return colorArray.map((function(color){return rgbToHex.apply(void 0,Object(toConsumableArray.a)(color))}))}__webpack_exports__.default={title:"Chart",decorators:[dist.withKnobs]};var index_stories_barChart=function barChart(){var type=Object(dist.optionsKnob)("Type",{Normal:"normal",Stacked:"stacked",Grouped:"grouped"},"normal",{display:"inline-radio"}),colors=Object(dist.array)("Colors",interpolateColors("#F28A30","#F3E96B",3),", ");return react_default.a.createElement(BarChart_Chart,{options:{type:type,colors:colors}})},index_stories_lineChart=function lineChart(){var style=Object(dist.optionsKnob)("Style",{Straight:"straight",Curved:"curved"},"straight",{display:"inline-radio"}),colors=Object(dist.array)("Colors",interpolateColors("#F28A30","#F3E96B",3),", "),multiline=Object(dist.boolean)("Multiline",!1);return react_default.a.createElement(LineChart_Chart,{options:{style:style,colors:colors,multiline:multiline}})},index_stories_pieChart=function pieChart(){var colors=Object(dist.array)("Colors",interpolateColors("#F28A30","#F3E96B",5),", ");return react_default.a.createElement(PieChart_Chart,{options:{colors:colors}})};index_stories_barChart.__docgenInfo={description:"",methods:[],displayName:"barChart"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\index.stories.js"]={name:"barChart",docgenInfo:index_stories_barChart.__docgenInfo,path:"src\\index.stories.js"}),index_stories_lineChart.__docgenInfo={description:"",methods:[],displayName:"lineChart"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\index.stories.js"]={name:"lineChart",docgenInfo:index_stories_lineChart.__docgenInfo,path:"src\\index.stories.js"}),index_stories_pieChart.__docgenInfo={description:"",methods:[],displayName:"pieChart"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\index.stories.js"]={name:"pieChart",docgenInfo:index_stories_pieChart.__docgenInfo,path:"src\\index.stories.js"})}},[[343,1,2]]]);
//# sourceMappingURL=main.515ba126c47eb5cd2c23.bundle.js.map